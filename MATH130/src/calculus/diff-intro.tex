%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation -----------------------------------------------%
%-----------------------------------------------------------------------------%
\chapter{Differentiation}
\label{chap:Differentiation}
In a nutshell, differentiation is the process of finding the rate of change at
an instant point in time. Often, we are looking at data or formulae that has
been plotted on a graph to form a curve.\footnote{We say curve, and we can do it
on a straight line too, but given a straight line is, well, straight, there is
no change in the rate of change}

An example of this would be if we throw a ball in the air. The velocity of the
ball changes from second to second, however, the rate at which the velocity
changes (called acceleration) also changes. At first, the ball slows down quite
quickly, and at the maximum heigh, the velocity plateaus, reaches zero, and then
starts falling, slowly at first then faster and faster until it hits the ground.

In reality, cannot get an exact value for instantaneous points in time, however,
we can measure the height of the ball at sufficiently fast intervals to
get sufficiently accurate average velocities. At some point, the value of what
you measure will not change by very much with respect to the change in time.
This is what we call the \emph{limit} when the measured data is constant.

There are 5 methods of differentiation which are useful for MATH130. These are:
\begin{itemize}
  \item Fundamental theorem of Calculus
  \item Scaling Rule
  \item Sum Rule
  \item Power Method (well, that's what I call it)
  \item Product Rule
  \item Quotient Rule
  \item Chain Rule
\end{itemize}

%------------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Fundamental Theorem of Calculus -------------%
%------------------------------------------------------------------------------%
\section{Fundamental Theorem of Calculus}
\label{sec:FundamentalTheoremOfCalculus}

The \emph{fundamental theorem of calculus} is the basis for the other $4$ rules.
We measure the change in the $y$ value of a function divided by the change in
the $x$ value. What this boils down to is:
\begin{align}
  \frac{\Delta y}{\Delta x} & = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h} 
  \label{eq:FundamentalTheoremOfCalculus}
\end{align}

\noindent \emph{It is sometimes called the limit of the difference quotient.}

\noindent If this quantity makes sense as $h \to 0$ ($h$ approaches zero), we
end up with the exact rate of change of $f$ at $x$. This is called \emph{the
derivative of $f$ at $x$}.

\noindent It is worth noting at this point that we are finding the
\emph{tangent} of a point along a curve which is a fancy way of saying that as
we ``zoom in'', the gradient of the line starts to resemble the curve
itself.\footnote{This is hardly a mathematical definition, but it describes the
process of what is going on.}

\subsection{Language of Calculus}
\label{subsec:LanguageOfCalculus}

Because the notion of calculus was a joint effort between several
mathematicians\footnote{Gottfried Leibniz woke up one day and thought ``I'm
going to invent a whole new branch of mathematics to annoy students for the
next few hundred years.'' Approximately 10 years earlier, Sir Isaac Newton
thought ``I know what will really get Leibniz's goat... I'll get the drop on
him with this idea I have.'' Consequently, the two never became friends.}
operating in secret from each other, and without a project manager there are two
important notations.\footnote{there are more, but we don't need to know about
them for MATH130}
\\
The first notation is the ``dash'', ``prime'', or ``Lagrange's'' notation and
appears as such:
\begin{align}
   f(x) & = \ldots \nonumber \\
  f'(x) & = \ldots \nonumber
  \intertext{Secondly is Leibniz's notation:}
  y & = \ldots \nonumber \\
  \deriv{y}{x} &= \ldots \nonumber
  \intertext{Euler's notation: (not so common in MATH130)}
    f(x) & = \ldots \nonumber \\
   Df(x) & = \ldots \nonumber
\end{align}
Each notation has their merits and usefulness; Lagrange's form is neat and
compact for simple derivatives, however Leibniz's notation describe what is
being differentiated and what is in respect to\footnote{which is useful for the
chain rule discussed shortly}.

It is important to be familiar with both Lagrange's and Leibniz's as they will
often be used interchangeably for brevity, neatness and ease of memorising them.
In terms of how you answer a question - if there is no stated style of notation,
go for what ``looks'' like it works \footnote{Munner's Law: If it looks wrong it
probably is. -- Cliff Munro, 1996 Cranbrook School, Design and Technology
teacher. Author's corollary: If it doesn't look wrong, hopefully it's right.}
and is clear and neat. Clear and neat usually results in the marker
understanding what you are on about, so even if you are wrong, you might get
partial marks.

A useful tip, when you are first getting used to differentiation, it may be
handy to use Leibniz's notation and say in your mind what you are
differentiating, and what it is in respect to.

\subsection{Using the Fundamental Theorem of Calculus}
\label{subsec:UsingTheFundamentalTheoremOfCalculus}

Suppose we drop a ball from a height ($s = 0$). The formula is given by
\begin{align}
  s & = f(t) \nonumber \\
    & = 5t^2 \nonumber \\
    & = \frac{1}{2}gt^2
\intertext{Height at $1$ second:}
    & = 5(1)^2
\intertext{Height at $1.2$ seconds}
    & = 5(1.2)^2
\intertext{The difference is given by:}
  \frac{\Delta s}{\Delta t} & = \lim_{t \to 0} \\
  & = \lim_{t \to 0} \frac{f(1.2) - f(1)}{0.2} \\
  & = \lim_{t \to 0} \frac{5(1.2)^2 - 5(1)^2}{0.2} \\
  & = 11
\end{align}

\noindent If we try successively smaller values for $h$, we get a table that
looks like this:

\begin{table}[!htb]
\label{tab:TypesOfNumbers}
\begin{tabularx}{\linewidth}{ r | c | X} \hline
  h & $\frac{f(1+h)-f(1)}{h}$ & value \\
                                            \hline \hline
  $0.2$     & $\frac{s(1.2)^2-5(1)^2}{0.2}$ & $11$ m/s \\
  $0.1$     & $\frac{s(1.1)^2-5(1)^2}{0.1}$ & $10.5$ m/s \\
  $0.05$    & $\frac{s(1.05)^2-5(1)^2}{0.05}$ & $10.25$ m/s \\
  $0.01$    & \ldots & $10.05$ m/s \\
  $0.001$   & \ldots & $10.005$ m/s \\ \hline
\end{tabularx}
\caption{The ball falling}
\end{table}

We have shown $f'(1) = 10$.

%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Approximating Functions --------------------%
%-----------------------------------------------------------------------------%
\section{Approximating Functions}
\label{sec:ApproximatingFunctions}
One use of tangents is to approximate functions. By finding the tangent of a
line at a point, you get a rough idea of the function itself. This becomes
useful for very complicated functions\footnote{probably beyond the realm of
MATH130}, given that the complexity of a function may make computing the
function itself prohibitive, and ``near enough is good enough'' as we are taking
an arbitrarily close value of $h$ in the fundamental theorem of calculus.

A different method for approximation is covered in significantly more detail
in Chapter \ref{chap:NewtonsMethod}, ``Newton's Method''. Newton's method
provides increasingly higher levels of precision in an estimation, and can be
applied ad infinitum to many functions.

\noindent For example: Suppose we are to approximate the function of $f(x) =
\sqrt{x}$.
\begin{figure}[!hbt]
\label{fig:FuncSqrtX}
\begin{tikzpicture}[domain=0:10]
  \draw [color=neekiGrey,dash pattern=on 1pt off 1pt,xstep=1cm,ystep=1cm]
  (-1,-1) grid (10,6);
  \draw[->,color=black] (-1,0) -- (10,0);
  \draw[shift={(0,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $0$};
  \draw[shift={(1,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $5$};
  \draw[shift={(2,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $10$};
  \draw[shift={(3,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $15$};
  \draw[shift={(4,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $20$};
  \draw[shift={(5,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $25$};
  \draw[shift={(6,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $30$};
  \draw[shift={(7,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $35$};
  \draw[shift={(8,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $40$};
  \draw[shift={(9,0)},color=black]  (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $45$};
  \draw[shift={(10,0)},color=black] (0pt,2pt) -- (0pt,-2pt) node[below] {\footnotesize $50$};
  \draw[->,color=black] (0,-1) -- (0,6);
  \foreach \y in {-1,0,1,2,3,4,5,6}
    \draw[shift={(0,\y)},color=black] (2pt,0pt) -- (-2pt,0pt) node[left]
    {\footnotesize $\y$};
  \draw[color=neekiBlue,thick,samples=1000]
    plot function{ sqrt(5*x)/2 }
    node[below] at (2,1) {$f(x)=\sqrt{x}$};
\end{tikzpicture}
\caption{Function: $f(x) = \sqrt{x}$}
\end{figure}
\begin{align}
                 f(x) & = \sqrt{x} \\
  \text{Then} ~ f'(x) & = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h} \\
                      & = \lim_{h \to 0} \frac{\sqrt{x+h} - \sqrt{x}}{h} \\
                      & = \lim_{h \to 0} \frac{\sqrt{x+h} - \sqrt{x}}{h} \frac{( \sqrt{x+h}-\sqrt{x}) }{ (\sqrt{x+h}-\sqrt{x}) }
  \intertext{identify difference of two squares}
            a^2 - b^2 & = (a-b)(a+b) \nonumber \\
       \text{Let} ~ a & = \sqrt{x+h} \\
                    b & = \sqrt{x} \\
    \text{So} ~ f'(x) & = \lim_{h \to 0} \frac{x + h - x}{h(\sqrt{x+h} + \sqrt{x})} \\
                      & = \lim_{h \to 0} \frac{h}{h(\sqrt{x+h} + \sqrt{x})} \\
                      & = \lim_{h \to 0} \frac{1}{\sqrt{x+h} + \sqrt{x}} \\
 \intertext{it is now safe to take a limit of $h = 0$}
                      & = \frac{1}{2\sqrt{x}}
 \intertext{We have found that if}
   f(x) & = \sqrt{x} = x^{\frac{1}{2}}
 \intertext{then}
   f'(x) & = \frac{1}{2\sqrt{x}} \\         
         & = \frac{1}{2} x^{-\frac{1}{2}}
 \intertext{The slope of the tangent to $\sqrt{x}$ at $x=36$ is}
  f'(36) & = \frac{1}{2\sqrt{36}} \\
         & = \frac{1}{12}
 \intertext{The equation of the tangent is found using $y = m(x-a)+b$ using the
 slope in point form $(a,b)$ so}
    T(x) & = \frac{1}{12} \cdot (x-36)+6
 \intertext{$\sqrt{37}$ from our diagram is approximately $T(37)$}
   T(37) & = \frac{1}{12} + 6 \\
         & = 6\frac{1}{12} \\
  \sqrt{37} & \approx 6.083\ldots 
\end{align}

%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Scaling Method -----------------------------%
%-----------------------------------------------------------------------------%
\section{Scaling Method}
\label{sec:ScalingMethod}
Consider $f(x)$ and $2f(x)$.

This method, we simply double the function $f(x)$ to get $2f(x)$.

TODO: include graph of $y=x^3$ and $y=2x^3$.

Take a derivative of $f(x)$ at $x=a$ (ie, take a tangent line at $x=a$), and
then take a derivative of $2f(x)$ at $x=a$. We find that $2f'$ is $2 \cdot
f'$\footnote{this sounds less derpy when said out aloud}.
\begin{align}
  \deriv{2f(x)}{x} & = 2\deriv{f(x)}{x}
\intertext{likewise}
  \deriv{3f(x)}{x} & = 3\deriv{f(x)}{x}
\intertext{this gives rise to the general statement:}
  \deriv{~ a \cdot f(x)}{x} &= a \cdot \deriv{f(x)}{x}
\end{align}

%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Sum Rule -----------------------------------%
%-----------------------------------------------------------------------------%
\section{Sum Method}
\label{sec:SumMethod}
The derivative of a sum of functions is the sum of the derivatives.
\begin{align}
  (x^2+3x)' &= (x^2)' + (3x)' \\
  & = 2x + 3 ~ \text{either by power method or of limit of difference quotient}
\end{align}

%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Power Method -------------------------------%
%-----------------------------------------------------------------------------%
\section{Power Method}
\label{sec:PowerMethod}
The power method is by far the easiest to understand of all 3 methods, and if
possible, it may be easier to rearrange a part of an equation into index
notation and differentiate that way. This method is not always possible,
but by using the power laws from the series of equations starting with
\ref{eq:IndexLaw_Power0}, sometimes a shortcut can be made, which is why
Chapter \ref{chap:ExponentialsAndLogarithms} is important to know very well.
\\
Put simply, the power method can be understood as ``multiply the base by the
power and subtract one from the power'', and is demonstrated in equation
\ref{eq:DiffPowerMethod} below.
\begin{align}
             f(x) & = {x}^{a} + k \label{eq:DiffPowerMethodKValue} \\
  \deriv{f(x)}{x} & = a{x}^{a-1} \label{eq:DiffPowerMethod}
\end{align}
The value $k$ represents a constant, often just a plain number, though it
doesn't have to be. The important thing about the $k$-value in this example is
that there is no $x$ component. Hence it ``disappears''.\\
Functions may have more than one term, consider the following quadratic:
\begin{align}
  f(x)             & = {x}^{2} + 2xb + {b}^{2} \\
  \deriv{f(x)}{x} & = 2{x}^{1} + 2b \\
                   & = 2(x+b) \label{eq:DiffPowerMethodRespectTo}
\end{align}
Here we are asked to differentiate with respect to $x$ (denoted by the symbol
$\deriv{}{x}$). To do this, we bring the power of ${x}^{2}$ to the front, and
subtract 1 to give $2{x}^{1}$, and we do the same for the term ${2xb}$ by
looking at the invisible power (it's there, we just don't write it out of
laziness!\footnote{Or convenience, neatness, brevity.}): $2*{x}^{1}*b$
%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Product Rules ------------------------------%
%-----------------------------------------------------------------------------%
\section{Product Rule}
\label{sec:ProductRule}
A function $f(x)$ is a product of two functions, $u(x) * v(x)$. For example:
\begin{align}
  f(x) & = {x}^{3} \sin(x) \label{eq:DiffProdEx1}\\
       & = u(x)v(x)
\end{align}
In this case, we can see that $u(x) = {x}^{3}$ and $v(x) = \sin(x)$. While there
is a mathematical proof\footnote{refer to section \ref{eq:ProofOfProductRule} of
appendix} it is not necessary for MATH130. All we need to know is:
\begin{align}
             f(x) & = u(x)*v(x) \\
  \deriv{f(x)}{x} & = u'(x)*v(x) + v'(x)*u(x)
\end{align}
So for \ref{eq:DiffProdEx1}, to find the derivative:
\begin{align}
             f(x) & = {x}^{3}\,\sin(x) \nonumber \\
  \deriv{f(x)}{x} & = \lderiv{({x}^{3})}{x} * \sin(x) + {x}^{3} * \lderiv{\sin(x)}{x} \\
                  & = {3x}^{2}*\sin(x) + {x}^{3}*\cos(x)
\end{align}
This example makes use of a derivative of a trigonometric function. This will be
explored in chapter \ref{chap:DifferentiationOfTrigFunctions}, ``Differentiation
of Trig Functions'' - until then, just ignore the trigonometric part.
%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Quotient Rule ------------------------------%
%-----------------------------------------------------------------------------%
\section{Quotient Rule}
\label{sec:QuotientRule}
A quotient is a division - just like from primary school: $\frac{u}{v}$.
Previously we may have called the $u$ part the numerator, nowadays it is
called the \emph{dividend}, and the $v$ denominator previously called the
denominator is now called the \emph{divisor}, with the \emph{quotient} being
the result.
\\
To do quotient rule differentiation, we are actually using a modified version
of the product rule, however for MATH130 it is only required to think of it as a
separate rule.\footnote{Mathematical proof of this is in section 
\ref{eq:ProofOfQuotientRule} of the appendix.} The rule takes the form of:
\begin{align}
  f(x)
    & = \frac{u}{v} \\
  f'(x)
    & = \frac{\deriv{u}{x}\cdot v - u\cdot \deriv{v}{x}}{{v}^{2}} \label{eq:DiffQuot1}
\intertext{OR}
  f'(x)
  & = \frac{u'v - uv'}{{v}^{2}} \label{eq:DiffQuot2}
\end{align}
Although both \ref{eq:DiffQuot1} and \ref{eq:DiffQuot2} are identical,
\ref{eq:DiffQuot2} is tidier, and may be easier to remember.
Consider the following example:
\begin{align}
  f(x)  & = \frac{{x}^{2}}{4x} \\
  f'(x) & = \deriv{(4x){x}^{2}}{x} - {x}^{2} (\deriv{4x}{x}) \\
  f'(x) & = (4x)2x - {x}^{2}\,(4) \\
  f'(x) & = 8{x}^{2} - 4{x}^{2} \\
  f'(x) & = 4{x}^{2}
\end{align}
%-----------------------------------------------------------------------------%
%- Calculus :: Differentiation :: Chain Rule ---------------------------------%
%-----------------------------------------------------------------------------%
\newpage
\section{Chain Rule}
\label{sec:ChainRule}
The chain rule is useful for differentiation a function $f(x)$ where there are
functions inside of functions (such as $\ln(\sin(x))$). To do this, we break
the function up into it's components, give them some names \footnote{''
\emph{Let}`` is possibly the most important word you will come across in
mathematics. You can use it to redefine stuff if it's too complex and break it
into smaller manageable pieces and put it back together again." -- Chris
Gordon, MATH130 lecturer, Macquarie University, Semester 1 2011} and apply the
chain rule.
\\
The rule takes the form as follows\footnote{using this notation makes it clear as to
what is actually going on}:
\begin{align}
  \deriv{y}{x} & = \deriv{y}{u} \cdot \deriv{u}{x} \\
\end{align}
Here is an example of where we might use the chain rule:\footnote{Note that the
$v$ function above in this example is simply ${u}^{3}$.}\footnote{While we
could use the power method to solve this particular problem in 2 steps, we will
demonstrate chain rule first, and then the power method.}
\begin{align}
  f(x)
    & = {({x}^{2})}^{3}
  \intertext{Let $u = {x}^{2}$ such that}
  f(x)
    & = {u}^{3} \label{eq:DiffChainRuleLet}
  \intertext{The first step in \ref{eq:DiffChainRuleLet} is to identify the
  chain rule, and to name the function inside $u$. It just makes things
  easier this way for most of the time.}
  f'(x)
    & = \deriv{f}{u} \cdot \deriv{u}{x} \\
    & = 3u^2 \cdot 2x
  \intertext{\ref{eq:DiffChainRuleLet} It often helps to rewrite the equation
  in terms of $f(x)$ and $u$, and then to write out the chain rule. Normally we
  are differentiating $f(x)$ with respect to $x$. Here we differentiate $f(x)$
  with respect to $u$ (ie $\deriv{f}{u}$). \emph{THEN} we multiply by
  $\deriv{u}{x}$. The rest is plain old algebra. So.. substitue values back for
  $\deriv{u}{x}$.}
    & = 3u^2 \cdot 2x \nonumber \\
    & = 3(x^2)^2 \cdot 2x \\
    & = 3x^4 \cdot 2x \\
    & = 6x^5
\end{align}
As a point of exercise, here's how much faster it is using the power method:
\begin{align}
  f(x)
    & = {({x}^{2})}^{3} \nonumber \\
  f(x)
    & = {x}^{6}
  \intertext{Now we use the differentiation power method, bring the power out
  the front and reduce the power by one}
  f'(x) & = 6{x}^{5}
\end{align}
Although the power method here took only two steps, it should be noted that
power method cannot be used for all chain rule problems\footnote{in fact, most
of the time the power method won't work because maths teachers are these
hideous evil monsters who despise free time and kittens} - but for easy ones
like this, it is far faster to use power method). The following example cannot
use power method, and we \emph{should} use the chain rule:
\begin{align}
  f(x)
    & = \ln(\sin(x)) \\
  \text{Let } u(x) & = \sin(x) \\
  f'(x)
    & = \deriv{f}{u} \cdot \deriv{u}{x} \\
  \deriv{\sin(x)}{x}
    & = \cos(x) \\
  \deriv{\ln(u)}{u}
    & = \frac{1}{u} \\
  \text{substitute values back:} \\
  f'(x)
    & = \frac{1}{\sin(x)} \cdot \cos(x) \\
    & = \csc(x) \cdot \cos(x) \\
    \text{ or } \\
    & = \frac{\cos(x)}{\sin(x)} \\
    & = \cot(x)
\end{align}